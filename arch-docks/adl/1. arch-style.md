# Выбор архитектурного стиля

Status: Approved

## Change Log

- \[created\]  2025-11-15
- \[approved\] 2025-11-15


## Context

Сейчас в системе существует всего 2 сервиса:

- Frontend-клиент, который просто отдает статику
- Backend-сервер, который перенаправляет запросы в OpenWeatherAPI

Есть необходимость выбрать паттерн для реализации изменеий в функционале системы.


## Proposed Design

Предлагается использовать микросервисную архитектуру.

- Во-первых, это мой учебный проект и мне интересно сделать микросервисы.
- Во-вторых, сейчас города хранятся в SQLite базе данных, что не позволяет гибко добавлять и изменять города в системе. 
Так же это содает проблемы с масштабированием в системе, потому как надо вносить изменения в каждом контейнере бэкенда или вносить изменения в init скрипт базы и перезапускать контейнеры.

Потребуется изменить:
- Backend service 
    - Распилить его на 3 сервиса: Auth, City и Weather

- Frontend service
    - Разбить его на 2 части: Просмотр погоды и админ панель

- API Gateway
    - Его придется написать, для того чтобы упростить менеджмент запросов к сервисам


## Considerations

### Альтернативы

Из альтернатив - можно оставить монолит.
Но мне будет не так интересно и для меня в этом нет такой большой бизнес ценности.

Так же микросервисы помогут сделать сервис надежнее. 
При звыборе города фронтенд будет созранять выбранный город и передавать его название и страну / координаты в Weather Service и даже если 2 остальных сервиса упадут, то пользователи этого не заметят.

В то время как если база городов не будет доступна для монолита, то все упадет.

Так что этим самым мы выигрывает в надежности.

### Риски

- Есть риск увеличения задержек, так как придется вводить API Gateway, который внесет накладные расходы в работу
- Есть риск того, что моя бюджетная VPS не сможет выдержать такое количество контейнеров

### Последствия

#### Положительные

- Микросервисы можно будет развивать и разворачивать независимо
- Повышение надежности системы

### Предположения

- Предполагается наличие K8s кластера
- Предполагается, что нагрузка на приложение будет недбольшой и что система не будет падать из-за memory-overflow

#### Отрицательные

- Усложняется разработка системы
- Удорожается инфраструктура
- Требуется система мониторинга и введение API Gatewat

## Decision

Выбрана микросервисная архитектура.


## Other Related ADRs

Отсутствуют

